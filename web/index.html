<!DOCTYPE html>

<!--
  Google HTML5 slide template

  Authors: Luke Mahé (code)
           Marcin Wichary (code and design)
           
           Dominic Mazzoni (browser compatibility)
           Charles Chen (ChromeVox support)

  URL: http://code.google.com/p/html5slides/
  http://www.codeproject.com/KB/scripting/javascript-gotchas.aspx
-->

<html>
<head>
    <title>JavaScript Puzzlers</title>
    <meta charset='utf-8'>
    <link rel="stylesheet" href="css/puzzlers.css"/>
	<script src="js/lib/socket.io/socket.io.min.js"></script>
    <script src='js/slides.js'></script>
    <script src='js/puzzlers.js'></script>
</head>

<style>
        /* Your individual styles here, or just use inline styles if that’s
     what you want. */
    
    canvas.pie{
        position: absolute;
        right: 10px;
        bottom: 10px;
    }

    pre{
        margin: 10px 0 !important;
    }

    ul.poll li{
        width : 600px;
    }

    ul.poll{
        margin: 30px 0 10px 0;
    }

    strong{
        font-weight: bold;
        color: #333;
    }

    .poll li strong{
        /*color: #8b008b;*/
        color: inherit;
        font-weight: bold;
        /*font-style: italic;*/
        /*text-shadow: 0 0 5px #777;*/
    }

    /*.poll li strong:before, .poll li strong:after{*/
        /*content: '\'';*/
    /*}*/

</style>

<body style='display: none'>

<section class='slides layout-regular template-default'>

<!-- Your slides (<article>s) go here. Delete or comment out the
slides below. -->

<article class="intro">
    <h1>
        JavaScript Puzzlers
    </h1>

    <p>
        Gabriel Dayley, Tom Valletta & Mike Heath
        <br>
        December, 2011
    </p>
</article>


<article class="puzzle-tiger">
    <h3>Puzzle #1</h3>
    <section id="code1">
            <pre>
if("1" == 1) {
    if("" == 0) {
        if("" == "0") {
            alert("A");
        }
        else { alert("B"); }
    }
    else { alert("C"); }
}
else { alert("D"); }
</pre>
        <canvas width="200" height="200" class="pie"></canvas>
        <ul class="poll">
            <li rel="A">alerts: <strong>A</strong></li>
            <li rel="B">alerts: <strong>B</strong></li>
            <li rel="C">alerts: <strong>C</strong></li>
            <li rel="D">alerts: <strong>D</strong></li>
        </ul>
        <button>Try It</button>

        <script>
            PUZZLERS.bindQuestion("code1", "B");
        </script>
    </section>
</article>


<article class="nobackground">
    <h3>Lessons learned, Puzzle #1</h3>

    <ul class="build">
        <li>
            The double equals (==) performs comparisons after type coercion. With the == operator you can
            compare
            objects of
            different types.
        </li>

        <li>
            This is often not what you intended and can lead to undesired results.
        </li>

        <li>
            Instead you should make sure that your operands are of the right type before doing comparisons or
            use the
            triple
            equals operator (===) to do the comparisons.
        </li>
                    <pre>
"1" === 1 // false
Number("5") === 5  // true
</pre>
    </ul>
</article>


<article class="puzzle-box">
    <h3>Puzzle #2</h3>
    <section id="code2">
            <pre>
var x = parseInt("5");
var y = parseInt("05");
var z = parseInt("08");

alert((x + y) * z);
</pre>
        <canvas width="200" height="200" class="pie"></canvas>
        <ul class="poll">
            <li rel="A">alerts: <strong>80</strong></li>
            <li rel="B">alerts: <strong>18</strong></li>
            <li rel="C">alerts: <strong>0</strong></li>
            <li rel="D">alerts: <strong>NaN</strong></li>
        </ul>
        <button>Try It</button>

        <script>PUZZLERS.bindQuestion("code2", "C")</script>
    </section>
</article>


<article class="nobackground">
    <h3>Lessons learned, Puzzle #2</h3>

    <ul class="build">
        <li>parseInt() takes two parameters: number, base</li>
        <li>Omitting the second parameter assumes base-10 as the default</li>
        <li>Numbers starting with <strong>0x</strong> assumed as radix 16 (hex)</li>
        <li>Numbers starting with <strong>0</strong>, assumed as radix 8 (oct)</li>
        <li>There is no 8 (or 9) in octal so parseInt() just returns 0</li>
        <li>Specifying the intended base as the second parameter removes the ambiguity</li>
            <pre>
parseInt("08", 10) // 8
</pre>
    </ul>
</article>


<article>
    <h3>Puzzle #3</h3>
    <section id="code3">
            <pre>
var a = 0;
var b = 0 * -1;
                
if(a === b){
    if(1/a === 1/b){
        alert("Of course! You can't defy the laws of mathematics");
    }
    else{ alert("Einstein can't even explain this"); }
}
else{ alert('Well duh, -0 is not the same as 0'); }
</pre>
        <canvas width="200" height="200" class="pie"></canvas>
        <ul class="poll">
            <li rel="A">alerts: <strong>Of course! You can't defy the laws of mathematics</strong></li>
            <li rel="B">alerts: <strong>Well duh, -0 is not the same as 0</strong></li>
            <li rel="C">throws an error because -0 is NaN</li>
            <li rel="D">alerts: <strong>Einstein can't even explain this</strong></li>
        </ul>
        <button>Try It</button>
        <script>PUZZLERS.bindQuestion("code3", "D")</script>
    </section>
</article>

<article>
    <h3>Lessons learned, Puzzle #3</h3>
    <ul class="build">
        <li>Number allows for both positive and negative zero values</li>
        <li>+0 equals -0</li>
        <li>However +infinity does <strong>not</strong> equal -infinity</li>
    </ul>
</article>

<article>
    <h3>Puzzle #4</h3>
    <section id="code4">
            <pre>
var i, j, k = 0;

for(var i=0; i<3; i++) {
    for(var j=0; j<3; j++) {
        k = i * j;
    }
}
alert(i + j + k);</pre>

        <canvas width="200" height="200" class="pie"></canvas>

        <ul class="poll">
            <li rel="A">alerts: <strong>0</strong></li>
            <li rel="B">alerts: <strong>4</strong></li>
            <li rel="C">alerts: <strong>8</strong></li>
            <li rel="D">alerts: <strong>10</strong></li>
        </ul>
        <button>Try It</button>
        <!--<canvas class="pollBar" style="outline: 1px solid red; width: 777px; height: 15px; margin: 0"></canvas>-->
        <script>PUZZLERS.bindQuestion("code4", "D")</script>
    </section>
</article>

<article>
    <h3>Lessons learned, Puzzle #4</h3>
    <ul>
        <li>JavaScript has no concept of block scope</li>
        <li>Instead only functional scoping</li>
        <li>Therefore i, j, k remain in scope after the loop</li>
        <li>You can use immediate functions to create block like scope</li>
    </ul>
        <pre>
(function (){
    for(var i=0; i<10; i++) {
        console.log(i);
    }
}());
console.log(i); // undefined
        </pre>
</article>

<article>
    <h3>Puzzle #5</h3>
    <section id="code5">
            <pre>
var x = 2;
var y = 3;
(function (){
    alert(x + y);
    x = 0;
    var y = 2;
}());
</pre>
        <canvas width="200" height="200" class="pie"></canvas>
        <ul class="poll">
            <li rel="A">alerts: <strong>NaN</strong></li>
            <li rel="B">alerts: 5</li>
            <li rel="C">alerts: 2</li>
            <li rel="D">alerts: 0</li>
        </ul>
        <button>Try It</button>

        <script>PUZZLERS.bindQuestion("code5", "A")</script>
    </section>
</article>

<article>
    <h3>Lessons learned, Puzzle #5</h3>
    <ul class="build">
        <li>Re-declaring <strong>y</strong> inside the function causes unexpected behavior from the interpreter</li>
        <li>The interpreter moves <strong>var</strong> statements to the beginning, causing <strong>y</strong> to be undefined:</li>
            <pre>
var x = 2;
var y = 3;
(function (){
    var y;
    alert(x + y);
    x = 0;
    y = 2;
}());
</pre>
    </ul>

</article>


<article>
    <h3>Puzzle #6</h3>
    <section id="code6">
        <pre>
var background = function()
{
    return
    {
        color : 'blue'
    };
}
alert(background().color);
</pre>
        <canvas width="200" height="200" class="pie"></canvas>
        <ul class="poll">
            <li rel="A">alerts: <strong>blue</strong></li>
            <li rel="B">alerts: <strong>undefined</strong></li>
            <li rel="C">throws a TypeError</li>
            <li rel="D">alerts: <strong>[Object]</strong></li>
        </ul>
        <button>Try It</button>

        <script>PUZZLERS.bindQuestion("code6", "C")</script>
    </section>
</article>

<article>
    <h4>Lessons learned, Puzzle #6</h4>
    <ul class="build">
        <li>Semicolon's in JavaScript are optional</li>
        <li>The interpreter tries to guess where there should go</li>
        <li>This causes undesired results:</li>
        <pre>
var background = function()
{
    return; //Thanks, but no thanks!
    {
        color : 'blue'
    };
}</pre>
        <li>So, instead of returning the object, undefined is returned, causing a TypeError to be thrown</li>
    </ul>
</article>

<!-- - -TV- - -->

<article>
    <h3>Puzzle #7: Loopy Performance</h3>
    <section id="code7">
<pre style="line-height: 23px;">
A.	$('*').each(function(i){
	 e = $(this);
	});
	
B. 	var len = a.length;
	for (var i = 0; i < len; i++) {
	 e = $(a[i]);
	};
	
C. 	var i = a.length;
	while (i--) {
	 e = $(a[i]);
	}
	
D. 	for (var i in a) {
	 e = $(a[i]);
	};
</pre>
        <canvas width="200" height="200" class="pie"></canvas>
        <ul class="poll">
            <li rel="A">A is the fastest</li>
            <li rel="B">B is the fastest</li>
            <li rel="C">C is the fastest</li>
            <li rel="D">D is the fastest</li>
        </ul>

        <script>PUZZLERS.bindQuestion("code7", "C")</script>
    </section>
</article>

<article class='fill'>
    <h4>Lessons learned, Puzzle #7: Loopy Performance</h4>
    <img src='images/loopy-performance.png'/>
</article>

<article>
    <h3>Puzzle #8: JS++</h3>
    <section id="code8">
<pre>
+[]+ +'0XE'+ +true+ +'1E1'
</pre>
        <canvas width="200" height="200" class="pie"></canvas>
        <ul class="poll">
            <li rel="A">NaN</li>
            <li rel="B">"14110"</li>
            <li rel="C">90210</li>
            <li rel="D">25</li>
        </ul>

        <script>PUZZLERS.bindQuestion("code8", "D")</script>
    </section>
</article>

<article class='fill'>
    <h4>Lessons learned, Puzzle #8: JS++</h4>
    <ul class='build'>
		<li>"Unary + is the fastest and preferred way of converting something into a number, because it does not perform any other operations on the number." -MDN</li>
		<li><code>toNumber(getValue(expr))</code></li>
		<li><code>+[] &nbsp;&nbsp; == 0</code></li>
		<li><code>+'0xE' == 14</code></li>
		<li><code>+true&nbsp; == 1</code></li>
		<li><code>+'1e1' == 10</code></li>
	</ul>
</article>

<article class='fill'>
    <h4>Lessons learned, Puzzle #8: JS++ (cont.)</h4>
    <ul class='build'>
		<li>A. NaN</li>
		<li>B. "14110" &nbsp;<code>[]+ +'0XE'+ +true+ +'1E1'</code></li>
		<li>C. 25 &nbsp; &nbsp;	&nbsp; &nbsp; &nbsp;<code>+[]+ +'0XE'+ +true+ +'1E1'</code></li>
		<li>D. 90210 &nbsp; <code>+[]+ +'OXD1'+ +true+ +'9E4'</code></li>
	</ul>
</article>

<article>
    <h3>Puzzle #9: Thinking Inside the Box</h3>
    <section id="code9">
<pre>
++[[]][+[]]+[+[]]
</pre>
        <canvas width="200" height="200" class="pie"></canvas>
        <ul class="poll">
            <li rel="A">NaN</li>
            <li rel="B">"10"</li>
            <li rel="C">"0+0+0"</li>
            <li rel="D">Don't be ridiculous.  That will not evaluate!</li>
        </ul>

        <script>PUZZLERS.bindQuestion("code9", "D")</script>
    </section>
</article>

<article class='fill'>
    <h4>Lessons learned, Puzzle #9: Thinking Inside the Box</h4>
    <ul class='build'>
		<li>Unary + operator</li>
		<li><code>ToPrimitive()</code> converts empty array to empty string</li>
		<li><code>ToNumber()</code> converts empty array to 0</li>
		<li><code>++[[]][+[]]+[+[]] => ++[[]][0]+[0]</code></li>
	</ul>
</article>

<article class='fill'>
    <h4>Lessons learned, Puzzle #9: Thinking Inside the Box (cont.)</h4>
    <ul class='build'>
		<li><code>ToPrimitive()</code> converts empty array to empty string</li>
		<li><code>++[[]][0]+[0] => ++[""][0]+[0]</code></li>
		<li><code>++</code> increments and stores</li>
		<li><code>++[""][0]+[0] => 1+[0]</code></li>
		<li><code>ToPrimitive()</code> converts 0 array to "0" string</li>
		<li><code>1+[0] => 1+"0" => "10"</code></li>
	</ul>
</article>







</section>
</body>
</html>
